export PATH="/usr/local/bin:/opt/local/bin/:/usr/local/sbin:/usr/local/mysql/bin:/usr/local/pgsql/bin:$PATH"
export PATH=$HOME/local/bin:$PATH
export EDITOR="/usr/bin/vim -f"
export LC_CTYPE=en_US.UTF-8

# Utilities
alias todo='v /Users/fernando/Dropbox/Documentos/trabajo/todo.md'
alias plain='v /Users/fernando/Dropbox/Apps/Plain.txt/notes.md'
alias notes='v ~/Dropbox/Documentos/Trabajo/notes.md'
alias v="open -a VimR"
alias e_vimr="export EDITOR=\"open -a VimR\""
alias e_vim="export EDITOR=\"/usr/bin/vim -f\""
alias ll='ls -lha'

# Development
alias tld='tail -f log/development.log'
alias tlt='tail -f log/test.log'
alias rc='script/rails c'
alias server='python -m SimpleHTTPServer'
alias br='bundle exec rake'
alias r='rake'

# SSH
alias id_personal='ssh-add -D; ssh-add ~/.ssh/id_dsa'

# Git
alias p='git pull --rebase'
alias P='git push'

# Capistrano
alias D='cap production deploy'
alias S='cap staging deploy'
# Mina
alias M='mina deploy'
alias I='git pull && git push && mina staging deploy && mina production deploy'

# Use Changes.app for git diffs (nice when diffing single files and folders)
function gitdiff {
  [ $# -eq 7 ] && /usr/bin/env chdiff --wait "$2" "$5"
}

function giff {
  export GIT_EXTERNAL_DIFF="gitdiff"
  git diff "$1"
  export -n GIT_EXTERNAL_DIFF
}

function __my_ruby_version {
  if [ -f .ruby-version ]; then
    echo `rbenv local`" # "
  fi
}

function __docker_prompt {
  if [ -n "$DOCKER_HOST" ]; then
    echo "🐳 "
  fi
}

##### EXEC ###################################################################

if [ -f $(brew --prefix)/etc/bash_completion ]; then
  . $(brew --prefix)/etc/bash_completion
fi
source ~/bin/git-completion.bash
export GIT_PS1_SHOWDIRTYSTATE='true'
# completion support for the github gem
complete -o default -o nospace -F _git gh

##### COLORS #################################################################

# CLI & Prompt colors
export CLICOLOR=true
# a black
# b red
# c green
# d brown
# e blue
# f magenta
# g cyan
# h light grey
# A bold black, usually shows up as dark grey
# B bold red
# C bold green
# D bold brown, usually shows up as yellow
# E bold blue
# F bold magenta
# G bold cyan
# H bold light grey; looks like bright white
# x default foreground or background
# Order: dir - symlink - socket - pipe - exec - block special - char special - exec setuid - exec setgid - public dir sticky bit - public dir no sticky bit
export LSCOLORS='Dxfxcxdxbxegedabagacad'

# 30m - Black
# 31m - Red
# 32m - Green
# 33m - Yellow
# 34m - Blue
# 35m - Purple
# 36m - Cyan
# 37m - White
# Everything else is green...
# 0 - Normal
# 1 - Bold
# 2 -
function prompt {
  local BLACK="\[\033[0;30m\]"
  local RED="\[\033[0;31m\]"
  local GREEN="\[\033[0;32m\]"
  local YELLOW="\[\033[0;33m\]"
  local BLUE="\[\033[0;34m\]"
  local PURPLE="\[\033[0;35m\]"
  local CYAN="\[\033[0;36m\]"
  local WHITE="\[\033[0;37m\]"
  local WHITEBOLD="\[\033[1;37m\]"
  export PS1="\$(__docker_prompt)${BLUE}\$(__my_ruby_version)${CYAN}\W${WHITE} \$(__git_ps1 '(%s) ')$ "
  export PS1="\[\033[G\]$PS1"
}

# Auto jump
[[ -s $(brew --prefix)/etc/autojump.sh ]] && . $(brew --prefix)/etc/autojump.sh

# Prompt
prompt

# Rbenv
export RBENV_ROOT=/usr/local/var/rbenv
if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi
