export PATH="/usr/local/bin:/opt/local/bin/:/usr/local/sbin:/usr/local/mysql/bin:/usr/local/pgsql/bin:$PATH"
export PATH=$HOME/local/bin:$PATH
export EDITOR="/usr/bin/vim -f"
# export EDITOR="open -a VimR"
export LC_CTYPE=en_US.UTF-8
export PATH=$PATH:/usr/local/opt/go/libexec/bin
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin

# Utilities
alias todo='v /Users/fernando/Dropbox/Documentos/trabajo/todo.tasks'
alias notes='v /Users/fernando/Dropbox/Documentos/trabajo/notes.md'
alias v="open -a VimR"

# Development
alias ree='rvm use ree-1.8.7-2012.02'
alias f='foreman start'
alias tld='tail -f log/development.log'
alias tlt='tail -f log/test.log'
alias sc='script/console'
alias sdbc='script/dbconsole'
alias cc='script/rails c'
alias server='python -m SimpleHTTPServer'

# BeBanjo
alias movida='cd ~/proyectos/movida'
alias mmovida='movida; v .'
alias sequence='cd ~/proyectos/sequence'
alias msequence='sequence; v .'
alias panorama='cd ~/proyectos/panorama'
alias mpanorama='panorama; v .'
alias sheriff='cd ~/proyectos/sheriff'
alias rakemovida='ALL_SPECS=true bundle exec rake parallel:drop[3] parallel:create[3] parallel:load_schema[3] parallel:spec[3]'
alias br='bundle exec rake'
alias r='rake'
alias twp='bj syslog-tail production app-won-importer.log'

# SSH
alias id_bebanjo='ssh-add -D; ssh-add ~/.ssh/id_bebanjo_heroku'
alias id_personal='ssh-add -D; ssh-add ~/.ssh/id_dsa'

# Git
alias gl="git log --pretty=oneline"
alias gfo='git fetch origin'
alias gp='git fo && git re && git push'
alias gfr='git fo && git re'
alias grc='git rebase --continue'
alias gst='git status'
alias p='git pull --rebase'
alias P='git push'

# Capistrano
alias D='cap deploy'
# Mina
alias M='mina deploy'

# Use Changes.app for git diffs (nice when diffing single files and folders)
function gitdiff {
  [ $# -eq 7 ] && /usr/bin/env chdiff --wait "$2" "$5"
}

function giff {
  export GIT_EXTERNAL_DIFF="gitdiff"
  git diff "$1"
  export -n GIT_EXTERNAL_DIFF
}

function __my_rvm_ruby_version {
  local gemset=$(echo $GEM_HOME | awk -F'@' '{print $2}')
  [ "$gemset" != "" ] && gemset="@$gemset"
  local version=$(echo $MY_RUBY_HOME | awk -F'-' '{print $2}')
  [ "$version" == "1.8.7" ] && version=""
  local full="$version$gemset"
  [ "$full" != "" ] && echo "$full "
}

##### EXEC ###################################################################

if [ -f $(brew --prefix)/etc/bash_completion ]; then
  . $(brew --prefix)/etc/bash_completion
fi
source ~/bin/git-completion.bash
export GIT_PS1_SHOWDIRTYSTATE='true'
# completion support for the github gem
complete -o default -o nospace -F _git gh

##### COLORS #################################################################

# CLI & Prompt colors
export CLICOLOR=true
# a black
# b red
# c green
# d brown
# e blue
# f magenta
# g cyan
# h light grey
# A bold black, usually shows up as dark grey
# B bold red
# C bold green
# D bold brown, usually shows up as yellow
# E bold blue
# F bold magenta
# G bold cyan
# H bold light grey; looks like bright white
# x default foreground or background
# Order: dir - symlink - socket - pipe - exec - block special - char special - exec setuid - exec setgid - public dir sticky bit - public dir no sticky bit
export LSCOLORS='Dxfxcxdxbxegedabagacad'

# 30m - Black
# 31m - Red
# 32m - Green
# 33m - Yellow
# 34m - Blue
# 35m - Purple
# 36m - Cyan
# 37m - White
# Everything else is green...
# 0 - Normal
# 1 - Bold
# 2 -
function prompt {
  local BLACK="\[\033[0;30m\]"
  local RED="\[\033[0;31m\]"
  local GREEN="\[\033[0;32m\]"
  local YELLOW="\[\033[0;33m\]"
  local BLUE="\[\033[0;34m\]"
  local PURPLE="\[\033[0;35m\]"
  local CYAN="\[\033[0;36m\]"
  local WHITE="\[\033[0;37m\]"
  local WHITEBOLD="\[\033[1;37m\]"
  export PS1="${BLUE}\$(__my_rvm_ruby_version)${CYAN}\W${WHITE} \$(__git_ps1 '(%s) ')$ "
  export PS1="\[\033[G\]$PS1"
}

# Ruby GC
export RUBY_HEAP_MIN_SLOTS=1000000
export RUBY_HEAP_SLOTS_INCREMENT=1000000
export RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
export RUBY_GC_MALLOC_LIMIT=1000000000
export RUBY_HEAP_FREE_MIN=500000
export RUBY_FREE_MIN=$RUBY_HEAP_FREE_MIN

# Alfredos
function alfredos {
  curl -s "https://bebanjo.jottit.com/alfredos-rb" | grep "@" | sed 's/<[^>]*>//g'
  echo `curl -s "https://bebanjo.jottit.com/alfredos-rb" | grep "@" | wc -l`
}

# Bender
function bender {
  curl --data-urlencode 'message=$1' http://bebanjo-bender.herokuapp.com/say/153065
}

# Auto jump
[[ -s `brew --prefix`/etc/autojump.sh ]] && . `brew --prefix`/etc/autojump.sh

# BJ utility
eval "$(/Users/fernando/proyectos/bj/bin/bj init -)"

prompt

# RVM 
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*
